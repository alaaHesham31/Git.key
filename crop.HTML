<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
   integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
   
  <title>ELAGGAN</title>
</head>
<body>
  <h1 class="text-center mt-5">المحاصيل</h1>
  <div class="container mt-5 pb-5 pt-5 "dir="rtl">

      <div class="row ">
          <div class="offset-md-3 col-md-6  ">
              <input type="search" class="form-control" id="search" placeholder="ابحث هنا">
          </div>     
      </div>
      

      <h3 id="error" class="text-center mt-3"></h3>

      <div class="row ">
          <div class="offset-md-1 col-md-10 ">

              <table class="table table-bordered border-primary table-hover mt-5 text-capitalize" id="mytable">
              </table>

          </div>
      </div>
  </div>

  <script>
      var array = [
  {
      id: "1",
      field_id: "6",
      plant_id: "17",
      season_id: "6",
      planting_date:"30/4",
      harvesting_date:"26/7"
  },
  {
      id: "2",
      field_id: "8",
      plant_id: "10",
      season_id: "11",
      planting_date:"30/1",
      harvesting_date:"27/4"
  },
  {
      id: "3",
      field_id: "33",
      plant_id: "12",
      season_id: "32 ",
      planting_date:"25/11",
      harvesting_date:"2/2"
  },
  {
      id: "4",
      field_id: "9",
      plant_id: "12",
      season_id: "3",
      planting_date:"3/1",
      harvesting_date:"4/3"
  },
  {
      id: "5",
      field_id: "3",
      plant_id: "15",
      season_id: "12",
      planting_date:"15/8",
      harvesting_date:"15/12"
  }
]

function showtable(curarray) {
  document.getElementById("mytable").innerHTML = `
  <tr class="bg-primary text-white fw-bold">
              <td>رقم</td>
              <td>رقم الحقل </td>
              <td>رقم النبات </td>
              <td>رقم الموسم </td>
              <td> تاريخ الزراعة</td>
              <td>تاريخ الحصاد</td>
          </tr> ` ;

  if (curarray == "") {
      document.getElementById("error").innerHTML = `<span class='text-danger '>Not Found!</span>`;
  }
  else {

      document.getElementById("error").innerHTML = "";

      for (var i = 0; i < curarray.length; i++) {
          document.getElementById("mytable").innerHTML += ` 
            <tr > <td>${curarray[i].id}</td> <td>${curarray[i].field_id}</td> 
              <td>${curarray[i].plant_id}</td> <td>${curarray[i].season_id}</td>
              <td>${curarray[i].planting_date}</td> <td>${curarray[i].harvesting_date}</td> </tr>`;
      }
  }
}


showtable(array);

var newarray = [];

document.getElementById("search").addEventListener("keyup", function () {
  var search = this.value.toLowerCase();

  newarray = array.filter(function (val) {

      if (val.id.includes(search) || val.field_id.includes(search) || val.plant_id.includes(search)
          || val.season_id.includes(search) || val.planting_date.includes(search)|| val.harvesting_date.includes(search)) {
          var newobj = { id: val.id, field_id: val.field_id, plant_id: val.plant_id, season_id: val.season_id,
            planting_date: val.planting_date, harvesting_date:val.harvesting_date }
          return newobj;
      }
  });

  showtable(newarray);

});

  </script>


  

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</body>
</html>